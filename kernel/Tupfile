include_rules

# Architecture-dependent stuff
ifeq (@(TARGET_ARCH),x86_64)
	OBJECTS=$(OBJECTS) x86_64/*.o x86_family/*.o
	LINK_SCRIPT=x86_family/linker.ld
else
ifeq (@(TARGET_ARCH),i386)
	OBJECTS=$(OBJECTS) i386/*.o x86_family/*.o
	LINK_SCRIPT=x86_family/linker.ld
endif
endif

# Tupai
OBJECTS=$(OBJECTS) common/*.o

# Linking
: $(OBJECTS) |> !LINKER |> $(P_EXEC)-kernel.bin
